<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Amazon Stock Price Analysis</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
    <link href="/static/staticcss.css" rel="stylesheet" />
  </head>
  <body>
    <div class="container-sm-25">
      <a href="/initialise"
        ><button type="button" class="btn btn-info row sticky-top m-3">
          Home Page
        </button></a
      >
      <a href="/audit"
        ><button type="button" class="btn btn-info row sticky-top m-3">
          Audit Page
        </button></a
      >
      <h1 class="text-center">Results</h1>
      <div id="graph_div" class="container-sm"></div>
      <br />
      <br />
      <div id="table_div" class="container-sm">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">95th percentile</th>
              <th scope="col">99th percentile</th>
              <th scope="col">Profit or Loss</th>
            </tr>
          </thead>
          <tbody>
            {% for item in table %}
            <tr>
              <th>{{ loop.index }}</th>
              <td>{{ item[0] }}</td>
              <td>{{ item[1] }}</td>
              <td>{{ item[2] }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script type="text/javascript">
      google.charts.load("current", { packages: ["corechart"] });
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          [
            "Signal",
            "95% risk",
            "99% risk",
            "Average 95% risk",
            "Average 99% risk",
          ]].concat({{ chart|tojson|safe }}));

        var options = {
          title: "Risk Analysis Result",
          curveType: "function",
          legend: { position: "bottom" },
        };

        var chart = new google.visualization.LineChart(
          document.getElementById("graph_div")
        );

        chart.draw(data, options);
      }
    </script>
  </body>
</html>
